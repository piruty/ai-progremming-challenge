# MoodLogs 実装内容・特徴・学習ポイント

## アプリ概要

MoodLogsは「1日1回、気分や出来事を記録する」ことに特化したシンプルなデイリーログ記録アプリです。React + Viteで構築され、ローカルストレージを利用してデータを永続化します。

## 主な特徴

- **1日1回のみ記録**：同じ日に複数回記録できない設計。記録済みの場合はフォームが非表示になり、その日の内容のみ表示。
- **気分・出来事の記録**：テキストで自由に入力可能。
- **過去ログの一覧表示**：日付順で過去の記録を一覧表示。
- **シンプルで直感的なUI**：日本語ユーザー向けの分かりやすいデザイン。
- **ローカルストレージ保存**：サーバ不要、ブラウザのみで完結。

## 実装上のポイント

- **ReactのuseState/useEffect活用**：状態管理と副作用処理（初期データロードや日付切り替え時の再取得）をフックで実装。
- **ローカルストレージの利用**：`localStorage`でデータを永続化。保存・取得のラッパー関数を用意。
- **日付の一意性管理**：`toISOString().slice(0, 10)`で日付（YYYY-MM-DD）を一意キーとして利用。
- **フォームのバリデーション**：未入力時は記録不可。
- **UI/UX**：その日の記録済みかどうかでフォーム表示を切り替え、ユーザーが迷わない設計。
- **CSSでのモダンな見た目**：シンプルかつ見やすい配色・レイアウト。

## 学習ポイント

- Reactの基本的な状態管理・副作用処理
- ローカルストレージを使ったデータ永続化
- 日付管理と一意性の担保
- シンプルなCRUDアプリの構成方法
- 日本語UI設計の工夫

## App.jsxの実装詳細

- **型定義とデータ構造**
  - `MoodLog`型（date, mood, event）をJSDocで定義。
  - ログは配列で管理し、各要素が1日分の記録。

- **日付管理**
  - `getTodayString()`で常に`YYYY-MM-DD`形式の日付文字列を取得。
  - 今日の日付をキーにして「本日の記録」を一意に管理。

- **データの保存・取得**
  - `loadLogs()`でlocalStorageから全ログを取得。
  - `saveLogs(logs)`でlocalStorageに全ログを保存。

- **状態管理**
  - `useState`で気分・出来事・全ログ・本日のログを管理。
  - `useEffect`で日付が変わるたびにlocalStorageから再取得。

- **記録処理**
  - `handleSave`で本日の記録を保存。
    - mood/eventどちらも未入力なら保存しない。
    - 既存の本日分ログを除外し、新しいログを追加して保存。
    - 保存後はフォームを非表示にし、その日の記録内容を表示。

- **UI構成**
  - 本日分の記録があれば内容を表示、なければ入力フォームを表示。
  - 過去のログは日付降順でリスト表示。
  - シンプルなバリデーション（未入力時は保存不可）。

- **その他**
  - すべてのUI・メッセージは日本語。
  - スタイルは`App.css`で調整。

## 参考ファイル

- `src/App.jsx`：アプリの主要ロジック・UI
- `src/App.css`：スタイル定義
- `README.md`：概要・セットアップ方法

---
このアプリは、React/Viteの入門や、日々の記録習慣化のためのサンプルとしても活用できます。
